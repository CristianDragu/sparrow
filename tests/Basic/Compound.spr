//!! -t "SparrowImplicitLib.spr"
package Test;

class MyObj
{
    var a: Int;
    
    fun ctor(i: Int) { a = i; }
    fun ctor(other: MyObj) { a = other.a; }
    fun dtor {}
    fun print() { write("MyObj: "); writeLn(a); }

    var[static] st = 103;
}

var go = MyObj(10);

fun f1(): MyObj
{
    return MyObj(13);
}

fun f2(): @MyObj
{
    return go;
}

fun[native("test")] test(n: Int)
{
    writeLn(go.a);
    go.print();
    writeLn(go.st);
    writeLn("---");

    var o = MyObj(1);
    writeLn(o.a);
    o.print();
    writeLn(o.st);
    writeLn("---");

    writeLn(f1().a);
    f1().print();
    writeLn(f1().st);
    writeLn("---");

    writeLn(f2().a);
    f2().print();
    writeLn(f2().st);
}


/*<<<Running()
10
MyObj: 10
103
---
1
MyObj: 1
103
---
13
MyObj: 13
103
---
10
MyObj: 10
103
>>>*/