//!! -t "SparrowImplicitLib.spr"
package Test;

class MyVal
{
    var x: Int;

    fun ctor(xx: Int ) { x = xx; }

    fun value(): Int
    { return x; }

    fun print()
    {
        writeLn(x);
    }

    fun increment(): MyVal@
    {
        x += 1;
        return this;
    }

    fun next(): MyVal
    {
        return MyVal(x+1);
    }
}

fun getValue(x: Int ): MyVal
{
    return MyVal(x);
}

fun[native("test")] test(n: Int)
{
    var v: MyVal;
    v.print();
    writeLn(v.value());
    v.increment().print();
    v.print();
    v.next();
    v.print();
    v.next().print();
    v.print();
 
    writeLn("---");

    getValue(100).print();
    getValue(110).increment().print();
    getValue(120).next().print();

    writeLn("---");

    write("abc".getChar(intToSizeType(0)));
    write("abc".getChar(intToSizeType(1)));
    write("abc".getChar(intToSizeType(2)));
    writeLn("abc".size());
}

/*<<<Running()
0
0
1
1
1
2
1
---
100
111
121
---
abc3
>>>*/