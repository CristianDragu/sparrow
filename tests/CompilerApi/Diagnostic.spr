//!!

import meta.diagnostic;


fun sprMain // ERROR - introduced by the last meta.report
{
    var[ct] loc = meta.Location(meta.SourceCode.current(), 6, 6, 5, 12);

    var[ct] diag1 = meta.Diagnostic("Some information", loc, meta.diagInfo);
    meta.report(diag1);

    var[ct] diag2 = meta.Diagnostic("Some warning", loc, meta.diagWarning);
    meta.report(diag2);

    meta.report("Error at the beginning of the function", loc);

    var[ct] sc = meta.SourceCode.current();
    var[ct] sc2 = meta.SourceCode.fromFilename("/Users/lucteo/work/sparrow/dev/AutoTests/CompilerApi/Diagnostic.spr");

    cout << sc.filename() << endl;
    cout << sc2.filename() << endl;

    if ( sc == sc2 )
        cout << "equal\n";
    else
        cout << "not equal\n";
}
/*--<<<Running()
/Users/lucteo/work/sparrow/dev/AutoTests/CompilerApi/Diagnostic.spr
/Users/lucteo/work/sparrow/dev/AutoTests/CompilerApi/Diagnostic.spr
equal
>>>*/
